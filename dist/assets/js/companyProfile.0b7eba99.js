(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["companyProfile"],{"2e1b":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"company-profile"},[e.getCompany?t("div",{staticClass:"companies-list"},[t("b-row",[t("b-col",{staticClass:"mx-auto",attrs:{md:8,xl:5}},[t("EditCompanyProfile")],1)],1)],1):t("div",{staticClass:"text-center"},[t("b-img",{staticClass:"d-block no-company-profile-img mx-auto",attrs:{src:"./../../../assets/img/panel/construction.png",fluid:""}}),e._v(" "),t("h5",{staticClass:"mt-4 mb-3 font-weight-bold"},[e._v("\n      "+e._s(e.$t("pages.account.company-profile.no-company-profile-msg"))+"\n    ")]),e._v(" "),t("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.add-company",modifiers:{"add-company":!0}}],attrs:{variant:"primary"}},[e._v("\n      "+e._s(e.$t("pages.account.company-profile.add-company-profile-bt"))+"\n    ")])],1),e._v(" "),t("AddCompanyProfile")],1)},r=[],o=t("5530"),i=t("2f62"),c=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("b-modal",{ref:e.modalId,attrs:{id:e.modalId,title:e.$t("pages.account.company-profile.add-company-profile-bt")}},[t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"name",label:e.$t("pages.account.company-profile.name")},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}}),e._v(" "),t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"email",label:e.$t("pages.account.company-profile.email")},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}}),e._v(" "),t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"director_name",label:e.$t("pages.account.company-profile.director")},model:{value:e.form.directorName,callback:function(a){e.$set(e.form,"directorName",a)},expression:"form.directorName"}}),e._v(" "),t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"phone_number",label:e.$t("pages.account.company-profile.phone-number")},model:{value:e.form.phoneNumber,callback:function(a){e.$set(e.form,"phoneNumber",a)},expression:"form.phoneNumber"}}),e._v(" "),t("template",{slot:"modal-footer"},[t("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("\n      "+e._s(e.$t("modal.save-bt"))+"\n    ")]),e._v(" "),t("b-button",{attrs:{variant:"secondary"},on:{click:function(a){return e.hideModal(e.modalId)}}},[e._v("\n      "+e._s(e.$t("modal.cancel-bt"))+"\n    ")])],1)],2)},s=[],l=t("1da1"),m=(t("96cf"),t("b0c0"),t("d5ad")),p=t("d452"),u={mixins:[m["a"]],data:function(){return{form:{name:"",email:"",directorName:"",phoneNumber:""},modalId:"add-company"}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["addCompanyProfile"])),{},{hideModal:function(e){this.$refs[e].hide()},resetForm:function(){this.form={name:"",email:"",directorName:"",phoneNumber:""}},submit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var t,n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.resetInvalid(),t=e.form,n=t.name,r=t.email,o=t.directorName,i=t.phoneNumber,console.log(e.form),a.next=6,e.addCompanyProfile({name:n,email:r,director_name:o,phone_number:i});case 6:e.hideModal(e.modalId),e.resetForm(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),e.checkForInvalidResponse(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()}}),components:{ValidationInput:p["a"]}},d=u,f=t("2877"),b=Object(f["a"])(d,c,s,!1,null,null,null),v=b.exports,y=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"edit-company-profile"},[t("form",{staticClass:"company-profile-form-el",attrs:{action:""},on:{submit:function(a){return a.preventDefault(),e.updateCompanyProfile.apply(null,arguments)}}},[t("div",{staticClass:"text-center mb-4"},[t("b-avatar",{staticClass:"border-0 mb-2",attrs:{variant:"white",size:"8rem",src:e.companyImage}}),e._v(" "),t("label",{staticClass:"d-block change-foto text-link text-primary",attrs:{for:"company-image"}},[e._v("\n        Change Photo\n      ")]),e._v(" "),t("input",{staticClass:"d-none",attrs:{name:"update_picture",type:"file",id:"company-image"}})],1),e._v(" "),t("div",{staticClass:"company-profile-form"},[t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"name",label:e.$t("pages.account.company-profile.name")},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}}),e._v(" "),t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"email",label:e.$t("pages.account.company-profile.email")},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}}),e._v(" "),t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"director_name",label:e.$t("pages.account.company-profile.director")},model:{value:e.form.directorName,callback:function(a){e.$set(e.form,"directorName",a)},expression:"form.directorName"}}),e._v(" "),t("ValidationInput",{staticClass:"mb-3",attrs:{"field-name":"phone_number",label:e.$t("pages.account.company-profile.phone-number")},model:{value:e.form.phoneNumber,callback:function(a){e.$set(e.form,"phoneNumber",a)},expression:"form.phoneNumber"}})],1),e._v(" "),t("b-btn",{attrs:{type:"submit",variant:"primary"}},[e._v("Update")])],1)])},h=[],g=(t("99af"),t("bd9a")),C=t("2b47"),_={mixins:[m["a"]],data:function(){return{form:{name:"",email:"",directorName:"",phoneNumber:""},companyProfileInput:null}},mounted:function(){this.companyProfileFormData=document.querySelector(".company-profile-form-el"),this.companyProfileInput=document.querySelector("#company-image");var e=this;this.companyProfileInput.addEventListener("change",(function(){this.value&&e.updateCompanyPicture()}))},computed:Object(o["a"])(Object(o["a"])({},Object(i["c"])(["getCompany"])),{},{companyImage:function(){return this.getCompany.picture?"".concat(C["b"],"/storage/uploads/company/profile-picture/").concat(this.getCompany.picture):"#"}}),created:function(){var e=this.getCompany,a=e.name,t=e.email,n=e.director_name,r=e.phone_number;this.form={name:a,email:t,directorName:n,phoneNumber:r}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["updateCompany"])),{},{updateCompanyProfile:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.resetInvalid(),a.next=4,e.updateCompany({companyId:e.getCompany.id,form:{name:e.form.name,email:e.form.email,phone_number:e.form.phoneNumber,director_name:e.form.directorName}});case 4:g["Notify"].success("Berhasil mengupdate profil perusahaan"),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error(a.t0),e.checkForInvalidResponse(a.t0);case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()},updateCompanyPicture:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.updateCompany({companyId:e.getCompany.id,form:new FormData(e.companyProfileFormData)});case 3:e.companyProfileInput.value="",g["Notify"].success("Berhasil mengupdate profil perusahaan"),a.next=11;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error(a.t0),g["Notify"].failure("Error saat mencoba mengupdate profil perusahaan");case 11:case"end":return a.stop()}}),a,null,[[0,7]])})))()}}),components:{ValidationInput:p["a"]}},x=_,I=(t("d165"),Object(f["a"])(x,y,h,!1,null,"4c322d14",null)),N=I.exports,k={computed:Object(o["a"])({},Object(i["c"])(["getCompany"])),components:{AddCompanyProfile:v,EditCompanyProfile:N}},$=k,w=(t("386e"),Object(f["a"])($,n,r,!1,null,"4956910c",null));a["default"]=w.exports},"386e":function(e,a,t){"use strict";t("e20d")},"50c1":function(e,a,t){},d165:function(e,a,t){"use strict";t("50c1")},d452:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"validation-input"},[t("label",{staticClass:"form-group has-float-label mb-0 can-invalid",class:e.fieldName},[t("input",{staticClass:"form-control",attrs:{type:e.type},domProps:{value:e.value},on:{input:function(a){return e.$emit("input",a.target.value)}}}),e._v(" "),t("span",[e._v(e._s(e.label))])]),e._v(" "),t("span",{staticClass:"mt-1 d-block text-danger error-msg d-none",attrs:{for:""}})])},r=[],o={props:{value:{type:String,required:!1},fieldName:{type:String,required:!0},label:{type:String,required:!0},type:{type:String,required:!1,default:"text"}}},i=o,c=t("2877"),s=Object(c["a"])(i,n,r,!1,null,null,null);a["a"]=s.exports},d5ad:function(e,a,t){"use strict";t("159b");var n=t("bd9a");a["a"]={methods:{setInvalid:function(e,a){var t=".can-invalid.".concat(e),n=document.querySelector("".concat(t," input.form-control")),r=document.querySelector("".concat(t," span")),o=document.querySelector("".concat(t," + .error-msg"));n.classList.add("border-danger"),r.classList.add("text-danger"),o.classList.remove("d-none"),o.innerHTML=a},processInvalid:function(e){for(var a in e.errors)this.setInvalid(a,e.errors[a])},resetInvalid:function(){var e=".can-invalid",a=document.querySelectorAll("".concat(e," input.form-control")),t=document.querySelectorAll("".concat(e," span")),n=document.querySelectorAll("".concat(e," + .error-msg"));a.forEach((function(e){e.classList.remove("border-danger")})),t.forEach((function(e){e.classList.remove("text-danger")})),n.forEach((function(e){e.classList.add("d-none"),e.innerHTML=""}))},checkForInvalidResponse:function(e){var a;switch(null===(a=e.response)||void 0===a?void 0:a.status){case 422:this.processInvalid(e.response.data);break;default:n["Notify"].failure("Terjadi kesalahan"),console.error(e);break}}}}},e20d:function(e,a,t){}}]);