(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["project"],{"428e":function(t,e,a){"use strict";a("8544")},8544:function(t,e,a){},bea2:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",{staticClass:"mb-3"},[a("b-colxx",{attrs:{xxs:"12"}},[a("piaf-breadcrumb",{attrs:{heading:"Projects"}}),t._v(" "),a("div",{staticClass:"separator"})],1)],1),t._v(" "),t.getCompany?t._e():a("a",{attrs:{href:"#"}},[a("b-alert",{staticClass:"rounded mb-4",attrs:{show:"",variant:"danger"}},[t._v("\n      "+t._s(t.$t("alert.email-no-active-company"))+"\n    ")])],1),t._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("ProjectItem",{ref:"project-item",on:{"edit-project-clicked":t.setEditedProject}})],1)],1),t._v(" "),a("AddProject",{attrs:{provinces:t.getProvinces},on:{"project-added":t.reload}}),t._v(" "),a("EditProject",{attrs:{provinces:t.getProvinces,"selected-project":t.selectedProject},on:{"project-edited":t.reload}})],1)},o=[],s=a("5530"),c=a("dead"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:t.modalId,attrs:{id:t.modalId,title:t.$t("pages.projects.add-project-modal-title")}},[a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.project-name")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.activity")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.activity,callback:function(e){t.$set(t.form,"activity",e)},expression:"form.activity"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.job")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.job,callback:function(e){t.$set(t.form,"job",e)},expression:"form.job"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.address")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.province")}},[a("v-select",{attrs:{label:"name",reduce:function(t){return t.hashid},options:t.provinces},model:{value:t.form.provinceId,callback:function(e){t.$set(t.form,"provinceId",e)},expression:"form.provinceId"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.fiscal-year")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.fiscalYear,callback:function(e){t.$set(t.form,"fiscalYear",e)},expression:"form.fiscalYear"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.margin-profit")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.marginProfit,callback:function(e){t.$set(t.form,"marginProfit",e)},expression:"form.marginProfit"}})],1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._v("\n      "+t._s(t.$t("modal.save-bt"))+"\n    ")]),t._v(" "),a("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.hideModal(t.modalId)}}},[t._v("\n      "+t._s(t.$t("modal.cancel-bt"))+"\n    ")])],1)],2)},i=[],l=a("1da1"),d=(a("96cf"),a("2f62")),m={data:function(){return{modalId:"add-project-modal",form:{name:"",activity:"",job:"",address:"",provinceId:0,fiscalYear:(new Date).getFullYear(),marginProfit:0},processedProvinces:[]}},props:{provinces:Array},methods:Object(s["a"])({hideModal:function(t){this.$refs[t].hide()},submit:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createProject(t.form);case 2:t.$emit("project-added"),t.hideModal(t.modalId);case 4:case"end":return e.stop()}}),e)})))()}},Object(d["b"])(["createProject"]))},f=m,p=a("2877"),u=Object(p["a"])(f,n,i,!1,null,null,null),b=u.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"project-item"},[a("div",{staticClass:"text-right mb-3"},[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.add-project-modal",modifiers:{"add-project-modal":!0}}],attrs:{variant:"primary"}},[t._v("\n      "+t._s(t.$t("pages.projects.add-project-modal-title"))+"\n    ")])],1),t._v(" "),a("CustomDataTable",{ref:"project-data-table",attrs:{api:t.fetchProjectAPI,title:"Daftar Projects",fields:t.fields},scopedSlots:t._u([{key:"actions",fn:function(e){return[a("router-link",{staticClass:"rab-icon-bt mx-1",attrs:{to:"/app/projects/"+e.row.rowData.hashid+"/rab"}},[a("i",{staticClass:"iconsminds-book"})]),t._v(" "),a("EditButton",{on:{click:function(a){return a.preventDefault(),t.editProject(e.row.rowData)}}}),t._v(" "),a("DeleteButton",{on:{click:function(a){return a.preventDefault(),t.deleteProject(e.row.rowData.hashid)}}})]}}])})],1)},j=[],h=[{name:"__sequence",title:"#"},{name:"name",title:"Name",sortField:"name"},{name:"created_at_formatted",title:"Created At",sortField:"created_at"},{name:"last_opened_at_formatted",title:"Last Opened At",sortField:"last_opened_at"},{name:"__slot:actions",title:"Aksi"}],g=a("6db9"),_=a("a5dd"),P=a("455a"),x=a("2b47"),y=a("ed08"),$=a("bd9a"),k={data:function(){return{fetchProjectAPI:"".concat(x["c"],"/project"),fields:h}},computed:Object(s["a"])({},Object(d["c"])(["getProvinces"])),methods:Object(s["a"])(Object(s["a"])({},Object(d["b"])(["destroyProject"])),{},{reload:function(){this.$refs["project-data-table"].reloadTable()},editProject:function(t){this.$bvModal.show("edit-project"),this.$emit("edit-project-clicked",t)},deleteProject:function(t){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var r,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(y["r"])({title:"Hapus Project ?",text:"Project ini akan dihapus secara PERMANEN !"});case 2:if(r=a.sent,o=r.isConfirmed,!o){a.next=9;break}return a.next=7,e.destroyProject(t);case 7:$["Notify"].success("Berhasil menghapus project"),e.reload();case 9:case"end":return a.stop()}}),a)})))()}}),components:{CustomDataTable:g["a"],AddProject:b,EditButton:_["a"],DeleteButton:P["a"]}},C=k,w=Object(p["a"])(C,v,j,!1,null,null,null),I=w.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-project"},[a("b-modal",{ref:t.modalId,attrs:{id:t.modalId,title:"Edit Project"}},[a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.project-name")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.activity")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.activity,callback:function(e){t.$set(t.form,"activity",e)},expression:"form.activity"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.job")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.job,callback:function(e){t.$set(t.form,"job",e)},expression:"form.job"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.address")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.province")}},[a("v-select",{attrs:{label:"name",reduce:function(t){return t.hashid},options:t.provinces},model:{value:t.form.provinceId,callback:function(e){t.$set(t.form,"provinceId",e)},expression:"form.provinceId"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.fiscal-year")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.fiscalYear,callback:function(e){t.$set(t.form,"fiscalYear",e)},expression:"form.fiscalYear"}})],1),t._v(" "),a("b-form-group",{staticClass:"has-float-label",attrs:{label:t.$t("pages.projects.margin-profit")}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.form.marginProfit,callback:function(e){t.$set(t.form,"marginProfit",e)},expression:"form.marginProfit"}})],1),t._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._v("\n        "+t._s(t.$t("modal.save-bt"))+"\n      ")]),t._v(" "),a("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.hideModal(t.modalId)}}},[t._v("\n        "+t._s(t.$t("modal.cancel-bt"))+"\n      ")])],1)],2)],1)},D=[],E=(a("b0c0"),{data:function(){return{modalId:"edit-project",form:{name:"",activity:"",job:"",address:"",provinceId:0,fiscalYear:"",marginProfit:0}}},props:["selectedProject","provinces"],watch:{selectedProject:function(){var t=this.selectedProject,e=t.name,a=t.activity,r=t.job,o=t.address,s=t.fiscal_year,c=t.profit_margin,n=this.selectedProject.province.hashid;this.form={name:e,activity:a,job:r,address:o,provinceId:n,fiscalYear:s,marginProfit:c}}},methods:Object(s["a"])(Object(s["a"])({},Object(d["b"])(["updateProject"])),{},{hideModal:function(t){this.$refs[t].hide()},submit:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a,r,o,s,c,n,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.form,r=a.name,o=a.activity,s=a.job,c=a.address,n=a.fiscalYear,i=a.marginProfit,l=t.form.provinceId,e.next=4,t.updateProject({projectId:t.selectedProject.hashid,form:{name:r,activity:o,job:s,address:c,province_id:l,fiscal_year:n,profit_margin:i}});case 4:t.$emit("project-edited"),t.hideModal(t.modalId),$["Notify"].success("Berhasil mengupdate satuan");case 7:case"end":return e.stop()}}),e)})))()}})}),A=E,Y=Object(p["a"])(A,O,D,!1,null,null,null),M=Y.exports,R={data:function(){return{provinces:[],selectedProject:{}}},beforeMount:function(){this.fetchProvinces()},methods:Object(s["a"])(Object(s["a"])({},Object(d["b"])(["fetchProvinces"])),{},{reload:function(){this.$refs["project-item"].reload()},setEditedProject:function(t){this.selectedProject=t}}),computed:Object(s["a"])({},Object(d["c"])(["getProvinces","getProjects","getCompany"])),components:{AppLayout:c["a"],AddProject:b,ProjectItem:I,EditProject:M}},B=R,N=(a("428e"),Object(p["a"])(B,r,o,!1,null,"17c89814",null));e["default"]=N.exports}}]);