(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["masterItemPrice"],{"455a":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"text-danger mr-2",class:e.additionalClasses,attrs:{href:e.href},on:{click:e.onClick}},[e._t("default",(function(){return[a("i",{staticClass:"simple-icon-trash"})]}))],2)},i=[],n={props:{href:{type:String,default:""},additionalClasses:{type:Object}},methods:{onClick:function(e){this.$emit("click",e)}}},c=n,s=a("2877"),o=Object(s["a"])(c,r,i,!1,null,null,null);t["a"]=o.exports},"55a8":function(e,t,a){},8766:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"item-price"},[a("div",{staticClass:"mb-3 d-flex justify-content-between"},[a("div",{staticClass:"left"},[a("div",{staticClass:"labeled-select position-relative d-inline-block",staticStyle:{width:"300px"}},[a("span",{staticClass:"px-1"},[e._v(" Provinsi")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.hashid},options:e.provinces},model:{value:e.selectedProvince,callback:function(t){e.selectedProvince=t},expression:"selectedProvince"}})],1)]),e._v(" "),a("div",{staticClass:"right"},[a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.batch-update-price-modal",modifiers:{"batch-update-price-modal":!0}}],staticClass:"mr-1",attrs:{variant:"outline-primary"},on:{click:e.loadUngroupedItemPrice}},[e._v("\n        "+e._s(e.$t("pages.master.item-price.add-item-price-batch"))+"\n      ")]),e._v(" "),a("b-btn",{directives:[{name:"b-modal",rawName:"v-b-modal.add-item-price",modifiers:{"add-item-price":!0}}],staticClass:"mr-1",attrs:{variant:"primary"}},[e._v("\n        "+e._s(e.$t("pages.master.item-price.add-item-price"))+"\n      ")])],1)]),e._v(" "),e._l(e.itemPriceGroups,(function(t,r){return a("ItemPriceItem",{key:r,attrs:{idx:r,"active-province":e.selectedProvince,item:t},on:{"edit-item-clicked":e.editItem,"item-deleted":e.loadItemPrices}})})),e._v(" "),a("AddItemPrice",{on:{"item-price-added":e.loadItemPrices}}),e._v(" "),a("BatchUpdatePriceItemPrice",{attrs:{"item-prices":e.getUngroupedItemPrices},on:{"item-price-batch-updated":e.loadItemPrices}}),e._v(" "),a("EditItemPrice",{attrs:{"selected-item-price":e.edit.selectedItemPrice},on:{"item-price-updated":e.loadItemPrices}})],2)},i=[],n=a("5530"),c=a("1da1"),s=(a("96cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"\n    item-price-card-single\n    position-relative\n    mb-3\n    custom-nice-border\n    p-4\n    rounded-md\n    shadow-sm\n  "},[a("div",{staticClass:"heading mb-3"},[a("h5",[e._v(e._s(e.processAlphabeticNumber(e.idx+1))+". "+e._s(e.item.name))])]),e._v(" "),a("div",{staticClass:"body"},[a("table",{staticClass:"table text-left"},[e._m(0),e._v(" "),a("tbody",e._l(e.item.item_price,(function(t,r){return a("tr",{key:r},[a("td",[e._v(e._s(r+1))]),e._v(" "),a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",[e._v(e._s(t.unit.name))]),e._v(" "),a("td",[e._v(e._s(t.id))]),e._v(" "),a("td",[a("input",{staticClass:"rab-inline-editor",attrs:{type:"text"},domProps:{value:t.price.length?t.price[0].price:""},on:{change:function(a){return e.doUpdatePrice(t,a)}}})]),e._v(" "),a("td",[a("EditButton",{on:{click:function(a){return a.preventDefault(),e.editItemPrice(t)}}}),e._v(" "),a("DeleteButton",{on:{click:function(a){return a.preventDefault(),e.destroyItemPrice(t)}}})],1)])})),0)])])])}),o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[e._v("No.")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Uraian")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Satuan")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Kode")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Harga")]),e._v(" "),a("th",[e._v("Aksi")])])])}],l=a("a5dd"),d=a("455a"),u=a("ed08"),m=a("2f62"),p=a("bd9a"),f={props:["item","idx","activeProvince"],methods:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["deleteItemPrice","updatePrice"])),{},{editItemPrice:function(e){this.$emit("edit-item-clicked",e)},processAlphabeticNumber:function(e){return Object(u["c"])(e)},destroyItemPrice:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(u["r"])({title:"Hapus Data Harga Satuan ?",text:"Aksi ini tidak dapat dibatalkan !"});case 2:if(r=a.sent,i=r.isConfirmed,!i){a.next=15;break}return a.prev=5,a.next=8,t.deleteItemPrice(e.id);case 8:p["Notify"].success("Berhasil menghapus data harga satuan"),t.$emit("item-deleted"),a.next=15;break;case 12:a.prev=12,a.t0=a["catch"](5),a.t0.response?p["Notify"].failure(a.t0.response.data.message):p["Notify"].failure("Gagal saat mencoba menghapus harga satuan");case 15:case"end":return a.stop()}}),a,null,[[5,12]])})))()},doUpdatePrice:function(e,t){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.updatePrice({id:e.id,form:{province_id:a.activeProvince,price:t.target.value}});case 2:case"end":return r.stop()}}),r)})))()}}),components:{EditButton:l["a"],DeleteButton:d["a"]}},v=f,b=(a("accf"),a("2877")),h=Object(b["a"])(v,s,o,!1,null,"7350517e",null),_=h.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-item-price"},[a("b-modal",{ref:e.modalId,attrs:{id:e.modalId,title:e.$t("pages.master.item-price.add-item-price"),"no-close-on-backdrop":""}},[a("div",{staticClass:"labeled-select position-relative mb-4"},[a("span",{staticClass:"px-1"},[e._v(" Kelompok")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.hashid},options:e.getPriceGroups,id:""},model:{value:e.form.itemPriceGroup,callback:function(t){e.$set(e.form,"itemPriceGroup",t)},expression:"form.itemPriceGroup"}})],1),e._v(" "),a("ValidationInput",{staticClass:"mb-4",attrs:{label:"Kode","field-name":"id"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),e._v(" "),a("ValidationInput",{staticClass:"mb-4",attrs:{label:"Name","field-name":"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("div",{staticClass:"labeled-select position-relative mb-4"},[a("span",{staticClass:"px-1"},[e._v(" Satuan")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.hashid},options:e.getUnit,id:""},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("\n        "+e._s(e.$t("modal.save-bt"))+"\n      ")]),e._v(" "),a("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.hideModal(e.modalId)}}},[e._v("\n        "+e._s(e.$t("modal.cancel-bt"))+"\n      ")])],1)],2)],1)},g=[],I=(a("b0c0"),a("d452")),k=a("d5ad"),x={mixins:[k["a"]],data:function(){return{form:{id:"",name:"",unit:"",itemPriceGroup:[]},modalId:"add-item-price"}},created:function(){this.fetchUnit(),this.fetchItemPriceGroup()},methods:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["fetchItemPriceGroup","fetchUnit","storeItemPrice"])),{},{submit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.form,r=a.id,i=a.name,n=a.unit,c=a.itemPriceGroup,t.next=3,e.storeItemPrice({id:r,name:i,unit_id:n,item_price_group_id:c});case 3:s=t.sent,e.$emit("item-price-added",s),e.hideModal(e.modalId),e.resetForm(),p["Notify"].success("Berhasil menambahkan data harga satuan");case 8:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.form={id:"",name:"",unit:"",itemPriceGroup:[]}},hideModal:function(e){this.$refs[e].hide()}}),computed:Object(n["a"])({},Object(m["c"])(["getUnit","getPriceGroups"])),components:{ValidationInput:I["a"]}},C=x,y=Object(b["a"])(C,P,g,!1,null,null,null),j=y.exports,w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edit-item-price"},[a("b-modal",{ref:e.modalId,attrs:{id:e.modalId,title:e.$t("pages.master.item-price.update-item-price")}},[a("div",{staticClass:"labeled-select position-relative mb-4"},[a("span",{staticClass:"px-1"},[e._v(" Kelompok")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.hashid},options:e.getPriceGroups,id:""},model:{value:e.form.itemPriceGroup,callback:function(t){e.$set(e.form,"itemPriceGroup",t)},expression:"form.itemPriceGroup"}})],1),e._v(" "),a("ValidationInput",{staticClass:"mb-4",attrs:{label:"Kode","field-name":"id"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),e._v(" "),a("ValidationInput",{staticClass:"mb-4",attrs:{label:"Name","field-name":"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),a("div",{staticClass:"labeled-select position-relative mb-4"},[a("span",{staticClass:"px-1"},[e._v(" Satuan")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.hashid},options:e.getUnit,id:""},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[e._v("\n        "+e._s(e.$t("modal.save-bt"))+"\n      ")]),e._v(" "),a("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.hideModal(e.modalId)}}},[e._v("\n        "+e._s(e.$t("modal.cancel-bt"))+"\n      ")])],1)],2)],1)},O=[],$={mixins:[k["a"]],props:["selectedItemPrice"],data:function(){return{form:{id:"",name:"",unit:"",itemPriceGroup:""},modalId:"edit-item-price"}},computed:Object(n["a"])({},Object(m["c"])(["getUnit","getPriceGroups"])),methods:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["updateItemPrice"])),{},{submit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r,i,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.form,r=a.id,i=a.name,n=a.unit,c=a.itemPriceGroup,t.next=3,e.updateItemPrice({id:e.selectedItemPrice.id,form:{id:r,name:i,unit_id:n,item_price_group_id:c}});case 3:p["Notify"].success("Berhasil mengupdate data harga satuan"),e.$emit("item-price-updated"),e.hideModal(e.modalId);case 6:case"end":return t.stop()}}),t)})))()},hideModal:function(e){this.$refs[e].hide()}}),components:{ValidationInput:I["a"]},watch:{selectedItemPrice:function(){var e=this.selectedItemPrice,t=e.id,a=e.name,r=e.unit,i=e.item_price_group;this.form={id:t,name:a,unit:r.hashid,itemPriceGroup:i.hashid}}}},G=$,R=Object(b["a"])(G,w,O,!1,null,null,null),U=R.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"batch-update-price-item-price"},[a("b-modal",{ref:e.modalId,attrs:{id:e.modalId,title:"Batch Update Harga Satuan","no-close-on-backdrop":"",lazy:""}},[a("div",{staticClass:"labeled-select position-relative mb-4"},[a("span",{staticClass:"px-1"},[e._v(" Harga Satuan")]),e._v(" "),a("v-select",{attrs:{label:"name",reduce:function(e){return e.id},options:e.itemPrices,id:""},model:{value:e.itemPriceId,callback:function(t){e.itemPriceId=t},expression:"itemPriceId"}})],1),e._v(" "),a("ValidationInput",{staticClass:"mb-4",attrs:{type:"number",label:"Harga","field-name":"price"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" "),a("template",{slot:"modal-footer"},[a("b-button",{staticClass:"mr-1",attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.submitBatchUpdate.apply(null,arguments)}}},[e._v("\n        "+e._s(e.$t("modal.save-bt"))+"\n      ")]),e._v(" "),a("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.hideModal(e.modalId)}}},[e._v("\n        "+e._s(e.$t("modal.cancel-bt"))+"\n      ")])],1)],2)],1)},E=[],N={data:function(){return{itemPriceId:"",form:{price:""},modalId:"batch-update-price-modal"}},mixins:[k["a"]],props:["itemPrices"],methods:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["batchUpdateItemPrice"])),{},{submitBatchUpdate:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["r"])({title:"Gantikan Semua Harga ?",text:"Ketika anda melakukan batch update, maka semua harga pada harga satuan akan tergantikan dengan harga yang baru"});case 3:if(a=t.sent,r=a.isConfirmed,!r){t.next=12;break}return t.next=8,e.batchUpdateItemPrice({itemPriceId:e.itemPriceId,form:e.form});case 8:t.sent,p["Notify"].success("Berhasil batch update harga satuan"),e.hideModal(e.modalId),e.$emit("item-price-batch-updated");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](0),e.checkForInvalidResponse(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()},resetForm:function(){this.form={}},hideModal:function(e){this.$refs[e].hide()}}),watch:{itemPrices:function(){this.itemPrices.length&&(this.itemPriceId=this.itemPrices[0].id)}},components:{ValidationInput:I["a"]}},B=N,M=Object(b["a"])(B,S,E,!1,null,null,null),q=M.exports,A={data:function(){return{ungroupedItemPrices:[],itemPriceGroups:[],provinces:[],selectedProvince:"",edit:{selectedItemPrice:{}},form:{searchQuery:""}}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadProvinces();case 2:case"end":return t.stop()}}),t)})))()},methods:Object(n["a"])(Object(n["a"])({},Object(m["b"])(["fetchProvinces","fetchItemPrices","fetchUngroupedItemPrices"])),{},{loadProvinces:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchProvinces();case 2:a=t.sent,e.provinces=a,e.selectedProvince=a[0].hashid;case 5:case"end":return t.stop()}}),t)})))()},loadItemPrices:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchItemPrices(e.selectedProvince);case 2:a=t.sent,r=a.data,e.itemPriceGroups=r.data.itemPrices;case 5:case"end":return t.stop()}}),t)})))()},editItem:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.edit.selectedItemPrice=e,t.$bvModal.show("edit-item-price");case 2:case"end":return a.stop()}}),a)})))()},loadUngroupedItemPrice:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchUngroupedItemPrices();case 2:a=t.sent,console.log(a);case 4:case"end":return t.stop()}}),t)})))()}}),computed:Object(n["a"])({},Object(m["c"])(["getUngroupedItemPrices"])),watch:{selectedProvince:function(){this.loadItemPrices()}},components:{ItemPriceItem:_,AddItemPrice:j,ValidationInput:I["a"],EditItemPrice:U,BatchUpdatePriceItemPrice:q}},H=A,V=Object(b["a"])(H,r,i,!1,null,null,null);t["default"]=V.exports},a5dd:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"text-primary mr-2",class:e.additionalClasses,attrs:{href:e.href},on:{click:e.onClick}},[e._t("default",(function(){return[a("i",{staticClass:"simple-icon-pencil"})]}))],2)},i=[],n={props:{href:{type:String,default:""},additionalClasses:{type:Object}},methods:{onClick:function(e){this.$emit("click",e)}}},c=n,s=a("2877"),o=Object(s["a"])(c,r,i,!1,null,null,null);t["a"]=o.exports},accf:function(e,t,a){"use strict";a("55a8")},d452:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"validation-input"},[a("label",{staticClass:"form-group has-float-label mb-0 can-invalid",class:e.fieldName},[a("input",{staticClass:"form-control",attrs:{type:e.type},domProps:{value:e.value},on:{input:function(t){return e.$emit("input",t.target.value)}}}),e._v(" "),a("span",[e._v(e._s(e.label))])]),e._v(" "),a("span",{staticClass:"mt-1 d-block text-danger error-msg d-none",attrs:{for:""}})])},i=[],n={props:{value:{type:String,required:!1},fieldName:{type:String,required:!0},label:{type:String,required:!0},type:{type:String,required:!1,default:"text"}}},c=n,s=a("2877"),o=Object(s["a"])(c,r,i,!1,null,null,null);t["a"]=o.exports},d5ad:function(e,t,a){"use strict";a("159b");var r=a("bd9a");t["a"]={methods:{setInvalid:function(e,t){var a=".can-invalid.".concat(e),r=document.querySelector("".concat(a," input.form-control")),i=document.querySelector("".concat(a," span")),n=document.querySelector("".concat(a," + .error-msg"));r.classList.add("border-danger"),i.classList.add("text-danger"),n.classList.remove("d-none"),n.innerHTML=t},processInvalid:function(e){for(var t in e.errors)this.setInvalid(t,e.errors[t])},resetInvalid:function(){var e=".can-invalid",t=document.querySelectorAll("".concat(e," input.form-control")),a=document.querySelectorAll("".concat(e," span")),r=document.querySelectorAll("".concat(e," + .error-msg"));t.forEach((function(e){e.classList.remove("border-danger")})),a.forEach((function(e){e.classList.remove("text-danger")})),r.forEach((function(e){e.classList.add("d-none"),e.innerHTML=""}))},checkForInvalidResponse:function(e){var t;switch(null===(t=e.response)||void 0===t?void 0:t.status){case 422:this.processInvalid(e.response.data);break;default:r["Notify"].failure("Terjadi kesalahan"),console.error(e);break}}}}}}]);